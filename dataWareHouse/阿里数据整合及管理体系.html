<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf-8" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<title>阿里数据整合及管理体系</title>
	</head>
<body>
<h1>阿里数据整合及管理体系</h1>

<p>制定企业内部数据整合及管理的方法体系，在这一体系下，构建统一、规范、可共享的全域数据体系，避免数据的冗余和重复建设，规避数据烟囱和不一致性。</p>

<p>并借助统一化数据整合及管理的方法体系，构建数据公共层，帮助相似的大数据项目快速落地实现。</p>

<hr />

<h2>概述</h2>

<p>阿里大数据建设方法论的核心是<strong>从业务架构设计到模型设计，从数据研发到数据服务，做到数据可管理、可追溯、可规避重复建设</strong>。</p>

<h3>定位和价值</h3>

<p>建设统一的、规范化的数据接入层ODS和数据中间层DWD/DWS，完成服务于公司的大数据系统建设，即数据公共层建设。</p>

<p>提供标准化的、共享的、数据服务能力，降低数据互通成本，释放计算、存储、人力等资源，以消除业务和技术痛点。</p>

<h3>体系架构</h3>

<figure><img src="/Users/xerxes/note/dataWareHouse/src/ali%E6%95%B0%E6%8D%AE%E5%85%AC%E5%85%B1%E5%B1%82%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84.jpg"/></figure>

<h4>业务板块</h4>

<p>由于阿里业务生态庞大，所以根据业务的属性划分出几个相对独立的业务板块，业务板块之间的指标或业务重叠性较小。</p>

<h4>规范定义</h4>

<p>设计数据规范命名体系，规范定义将会被用在模型设计中。</p>

<h4>模型设计</h4>

<p>以维度建模理论为基础，基于维度建模总线架构，构建一致性的维度和事实。</p>

<hr />

<h2>规范定义</h2>

<blockquote>
<p>规范定义指以维度建模作为理论基础，构建总线矩阵，划分和定义数据域、业务过程、维度、度量/原子指标、修饰类型、修饰词、时间周期、派生指标。</p>
</blockquote>

<figure><img src="/Users/xerxes/note/dataWareHouse/src/%E8%A7%84%E8%8C%83%E5%AE%9A%E4%B9%89%E5%AE%9E%E4%BE%8B.jpg"/></figure>

<h3>名词术语</h3>

<h4>数据域</h4>

<p><strong>指面向业务分析，将业务过程或者维度进行抽象的集合</strong>。</p>

<p>业务过程可以概括为一个个不可拆分的行为事件，在业务过程之下，可以定义指标；</p>

<p>维度是指度量的环境，如买家下单事件，买家是维度。</p>

<p>在划分数据域时，既能涵盖当前所有的业务需求，又能再新业务进入时无影响地被包含进已有的数据域中和扩展新的数据域。</p>

<h4>业务过程</h4>

<p><strong>业务过程是一个不可拆分的行为事件</strong>，是企业的业务活动事件，如下单、支付、退款都是业务过程。</p>

<h4>时间周期</h4>

<p>用来明确数据统计的时间范围或者时间点。</p>

<h4>修饰类型</h4>

<p>对修饰词的一种抽象划分。修饰类型从属于某个业务域，如日志域的访问终端类型涵盖无线端、PC端等修饰词。</p>

<h4>修饰词</h4>

<p>指<strong>除了统计维度以外指标的业务场景限定抽象</strong>。修饰词从属于一种修饰类型，如日志域的访问终端类型涵盖无线端、PC端等修饰词。</p>

<h4>度量/原子指标</h4>

<p><strong>原子指标和度量含义相同，基于某一业务事件行为下的度量，是业务定义中不可再拆分的指标</strong>，具有明确业务含义的名词，如支付金额。</p>

<h4>维度</h4>

<p><strong>维度是度量的环境，用来反映业务的一类属性</strong>，这类属性的集合构成一个维度，也可以成为实体对象。维度属于一个数据域，如时间维度（包括年、月、周、日等）。</p>

<h4>维度属性</h4>

<p>维度属性隶属于一个维度，如时间维度中，年、月、周、日等都属于维度属性。</p>

<h4>派生指标</h4>

<p><code>派生指标 = 一个原子指标 + 多个修饰词（可选） + 时间周期</code></p>

<p>可以理解为对原子指标业务统计范围的限定。</p>

<p>如关于原子指标：‘支付金额’的派生指标：‘最近一天海外买家支付金额’，‘最近一天’是修饰词，‘买家’是维度。</p>

<h3> 指标体系</h3>

<h4>基本原则</h4>

<h5>组成体系之间的关系</h5>

<ul>
	<li>派生指标由原子指标、时间周期修饰词、若干其他修饰词组成而成：

		<figure><img src="/Users/xerxes/note/dataWareHouse/src/%E6%B4%BE%E7%94%9F%E6%8C%87%E6%A0%87.jpg"/></figure></li>
	<li>原子指标、修饰类型及修饰词，直接归属在业务过程下，其中修饰词继承修饰类型的数据域；</li>
	<li>派生指标可以选择多个修饰词，修饰词之间的关系为‘或’或者‘且’，由具体的派生指标语义决定；</li>
	<li>派生指标唯一归属一个原子指标，继承原子指标的数据域，与修饰词的数据域无关；</li>
	<li>原子指标有明确的英文字段名、数据类型和算法说明；派生指标要继承原子指标的英文名、数据类型和算法要求</li>
</ul>

<h5>命名约定</h5>

<ul>
	<li>命名术语：指标命名尽量使用英文简写，其次是英文，英文名太长时考虑使用汉语拼音首字母；</li>
	<li>业务过程：英文名用英文或英文的缩写或中文拼音简写；中文名使用具体的业务过程；</li>
	<li>原子指标：动作+度量，原子指标必须挂靠在某个业务过程下；</li>
	<li>修饰词：只有时间周期才会有英文名，其他修饰词无英文名；</li>
</ul>

<h5>算法</h5>

<p>原子指标、修饰词、派生指标的算法说明必须清晰，包括：</p>

<ul>
	<li>算法概述：算法对应的清晰的阐述</li>
	<li>举例</li>
	<li>sql算法说明：对于派生指标给出sql的写法或者伪代码</li>
</ul>

<h4>操作细则</h4>

<h5>派生指标的种类</h5>

<p>派生指标可以分为三类：</p>

<ul>
	<li>事务型指标

		<p>是指对业务活动进行衡量的指标。</p>

		<p>例如订单支付金额，这类指标需要维护原子指标及修饰词；</p></li>
	<li>存量型指标

		<p>是指对实体对象（商品、会员等）某些状态的统计。</p>

		<p>例如商品总数、注册会员总数，这类指标需要维护原子指标及修饰词；</p></li>
	<li>复合型指标

		<p>是在事务型指标和存量型指标的基础上复合而成的。</p>

		<p>例如浏览UV-下单买家数转化率，有些需要创建新原子指标，有些则可以在事务型或存量型原子指标的基础上增加修饰词获得</p></li>
</ul>

<h5>复合型指标的规则</h5>

<ul>
	<li>比率型：创建原子指标。例如“最近一天店铺首页CTR”，原子指标为“CTR”，时间周期为“最近一天”，修饰类型为“页面类型”，修饰词为“店铺首页”；</li>
	<li>比例型：创建原子指标。例如“最近一天无线支付金额占比”，原子指标为“支付金额占比”，修饰类型为“终端类型”，修饰词为“无线”；</li>
	<li>变化量型：不创建原子指标，增加修饰词，在此基础上创建派生指标。例如“最近一天订单支付金额上一天变化量”，原子指标为“订单支付金额”，时间周期为“最近一天”，修饰类型为“统计方法”，修饰词为“一天变化量”；</li>
	<li>统计型：不创建原子指标，增加修饰词，在此基础上创建派生指标，在修饰类型“统计方法”下增加修饰词，如“人均、日均、分位数等”。</li>
</ul>

<hr />

<h2>模型设计</h2>

<h3>指导理论</h3>

<blockquote>
<p>数据模型的维度设计主要以维度建模理论为基础，基于维度数据模型总线架构，构建一致性的维度和事实。</p>
</blockquote>

<h3>模型层次</h3>

<p><a href="/Users/xerxes/note/dataWareHouse/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E5%88%86%E5%B1%82.html"> /Users/xerxes/note/dataWareHouse/数据仓库分层.html </a></p>

<figure><img src="/Users/xerxes/note/dataWareHouse/src/ali%E6%95%B0%E4%BB%93%E5%88%86%E5%B1%82%E6%9E%B6%E6%9E%84.jpg"/></figure>

<h3>基本原则</h3>

<h4>高内聚和低耦合</h4>

<p>一个逻辑或者物理模型由哪些记录和字段组成，应该遵循最基本的高内聚和低耦合。主要从数据业务特性和访问特性两个角度考虑：</p>

<ul>
	<li>将业务相近、粒度相同的数据设计为一个逻辑或者物理模型；</li>
	<li>将高概率同时访问的数据放一起，将低概率同时访问的数据分开存储</li>
</ul>

<h4>核心模型与扩展模型分离</h4>

<p>建立<strong>核心模型</strong>与<strong>扩展模型</strong>体系。</p>

<p>核心模型包括的字段支持常用的核心业务，扩展模型包括的字段支持个性化或少量应用的需要，不能让扩展模型的字段过度侵入核心模型，以免破坏核心模型的架构简洁性和可维护性。</p>

<h4>公共处理逻辑下沉及单一</h4>

<p>越是底层公用的处理逻辑越应该在数据调度依赖的底层进行封装与实现，不要让公用的处理逻辑暴露给应用层实现，不要让公共逻辑多处同时存在。</p>

<h4>成本与性能平衡</h4>

<p>适当的数据冗余可换取查询和刷新性能，不宜过度冗余与数据复制。</p>

<h4>数据可回滚</h4>

<p>处理逻辑不变，在不同时间多次运行数据结果确定不变。</p>

<h4>一致性</h4>

<p>具有相同含义的字段在不同表中的命名必须相同，必须使用规范定义中的名称</p>

<h4>命名清晰、可理解</h4>

<p>表命名必须清洗、一致，表名需要易于消费者理解和使用</p>

<hr />

<h2>模型实施</h2>

<h3>指导方针</h3>

<blockquote>
<p>在建设数据仓库时，首先要进行充分的业务调研和需求分析。</p>

<p>其次，进行数据总体架构设计，主要是根据数据域对数据进行划分；按照维度建模理论，构建总线矩阵、抽象出业务过程和维度。</p>

<p>再次，对报表需求进行抽象整理出相关指标体系，完成指标规范定义和模型设计。</p>

<p>最后是代码研发和运维。</p>
</blockquote>

<h3>实施工作流</h3>

<figure><img src="/Users/xerxes/note/dataWareHouse/src/%E5%AE%9E%E6%96%BD%E5%B7%A5%E4%BD%9C%E6%B5%81.png"/></figure>

<h4>数据调研</h4>

<h5>业务调研</h5>

<p>要构建大数据数据仓库，就需要了解各个业务领域、业务线的业务有什么共同点和不同点，以及各个业务线可以细分为哪几个业务模块，每个业务模块具体的业务流程又是怎样的。</p>

<h5>需求调研</h5>

<p>收集数据使用者的需求，了解他们有什么数据诉求。可以与分析师、业务运营人员的沟通获知需求，也可以对报表系统中现有的报表进行研究分析。</p>

<h4>架构设计</h4>

<h5>划分数据域</h5>

<p>数据域是指面向业务分析，将业务过程或者维度进行抽象的集合。业务过程可以概括为一个个不可拆分的行为事件，如下单、支付、退款。</p>

<p>数据域需要抽象提炼，并且长期维护和更新，但不轻易变动。</p>

<p>在划分数据域时，既能涵盖当前所有的业务需求，又能在新业务进入时无影响地被包含进已有的数据域中或者扩展新的数据域。</p>

<p>例如：</p>

<table>
<tr><th>功能模块/业务线</th><th>业务动作</th></tr>
<tr><td>会员管理</td><td>新增会员、会员登录、会员信息修改</td></tr>
</table>
<p>根据业务过程进行归纳，可以抽象出数据域：</p>

<table>
<tr><th>数据域</th><th>业务过程举例</th></tr>
<tr><td>会员域</td><td>注册、登录</td></tr>
</table>
<h5>构建总线矩阵</h5>

<p>明确每个数据域下有哪些业务过程；业务过程与哪些维度相关，并定义每个数据域下的业务过程和维度。</p>

<p>如下是供应链管理业务过程示例：</p>

<figure><img src="/Users/xerxes/note/dataWareHouse/src/%E4%BE%9B%E5%BA%94%E9%93%BE%E7%AE%A1%E7%90%86%E4%B8%9A%E5%8A%A1%E8%BF%87%E7%A8%8B%E7%A4%BA%E4%BE%8B.jpg"/></figure>

<h4>规范定义</h4>

<p>规范定义主要定义指标体系，包括原子指标、修饰词、时间周期和派生指标。</p>

<h4>模型设计</h4>

<p>模型设计主要包括维度及属性的规范定义，维表、明细事实表和汇总事实表的模型设计。</p>

<h4>总结</h4>

<p> 实施过程是一个高度迭代和动态的过程，一般采用螺旋式实施方法。在总体架构设计完成后，开始根据数据域进行迭代式模型设计和评审。在架构设计、规范定义和模型设计等模型实施过程中，都会引入评审机制，以确保模型实施过程的正确性。</p>

</body>
</html>

