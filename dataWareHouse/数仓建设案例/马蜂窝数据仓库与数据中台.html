<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf-8" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<title>马蜂窝数据仓库与数据中台</title>
	</head>
<body>
<h1>马蜂窝数据仓库与数据中台</h1>

<p><a href="https://juejin.im/post/5d9c2ffaf265da5b7525a78a">https://juejin.im/post/5d9c2ffaf265da5b7525a78a</a></p>

<hr />

<h2>数据中台</h2>

<p>数据中台的概念接近<strong>传统数据仓库+大数据平台</strong>的结合体。它是在企业的数据建设经历了数据中心、数据仓库等积累之后，借助平台化的思想，将数据更好的整合与统一，以组件化的方式实现灵活的数据加工与应用，将数据与应用解耦，以服务的方式更好地释放数据价值。</p>

<p>数据平台更多的是体现一种管理思路和架构组织上的变革。</p>

<figure><img src="/Users/xerxes/note/dataWareHouse/src/%E9%A9%AC%E8%9C%82%E7%AA%9D%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0%E6%9E%B6%E6%9E%84.jpg"/></figure>

<hr />

<h2>数仓模型设计</h2>

<h3>建模方法选择</h3>

<p>大数据环境下，业务系统数据体系庞杂，数据结构多样、变更频繁，并且需要快速响应各种复杂的业务需求，传统建模理论无法满足现代数仓需求，需要采取<strong>以需求驱动为主、数据驱动为辅的混合模型设计方法，根据不同的数据层次选择模型</strong>。主要从四个方面综合考虑：</p>

<ul>
	<li>面向主题：采用范式模型理论中的主题划分方法对业务数据进行分类</li>
	<li>一致性保证：采用维度模型理论中的总线结构思想，建立统一的一致性维度表和一致性事实表来保证一致性</li>
	<li>数据质量保证：综合两种理论保证数据质量</li>
	<li>效率保证：合理采用维度退化、变化维、增加冗余等方法，保证数据的计算和查询效率</li>
</ul>

范式模型 + 维度模型 + 宽表模型 = DW模型
<p>ODS选择贴源的范式模型，不做进一步模型抽象，从节省存储角度考虑对该层采取拉链处理；</p>

<p>DWD和DWS基于对构建成本、性能，易用性角度的考虑，主要采取维度模型和一些宽表模型；宽表模型的本质是基于维度模型的扩展，对整个业务以及全节点信息进行垂直与水平方式整合；</p>

<p>同时采取退化维度的方式，将不同维度的度量放入数据表的不同列中，实现业务全流程视图的构建，来提升宽表模型的易用性、查询效率，且易于模型的扩展。</p>

<h3>设计目标</h3>

<ul>
	<li>准确性：数据质量管控要在建模过程中落地，为数据准确性保驾护航</li>
	<li>易用性：兼顾模型的可扩展性和可理解性</li>
	<li>及时性：充分考虑模型的使用效率，提供方便快捷的数据查询和数据计算服务</li>
</ul>

<h3>设计流程</h3>

<figure><img src="/Users/xerxes/note/dataWareHouse/src/%E9%A9%AC%E8%9C%82%E7%AA%9D%E6%95%B0%E4%BB%93%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B.jpg"/></figure>

<h4>需求调研</h4>

<p>收集和理解业务方需求，就特定需求的口径达成一致，在对需求中涉及到的业务系统或系统模块所承担的功能进行梳理后进行表字段级分析，并对数据进行验证，确保现有数据能够支持业务需求。</p>

<h4>模型设计</h4>

<p>根据需求和业务调研结果对模型进行初步归类，选择合适的主题域进行模型存放；</p>

<p>确定主题后进入数据模型的设计阶段，逻辑模型设计过程要考虑总线结构构建、模型规范定义等问题；</p>

<p>物理模型设计以逻辑模型为基础，兼顾存储性能等因素对逻辑模型做的物理化的过程，是逻辑模型的最终物理实现。</p>

<p>物理模型一般与逻辑模型保持一致，模型设计完成后需要进入评审与Mapping设计。</p>

<h4>模型开发</h4>

<p>就是对模型计算脚本的代码实现过程，其中包含了数据映射、脚本实现、测试验证等开发过程。</p>

<p>单元测试完成后需要通知业务方一起对模型数据进行业务验证，对验证问题做收集，返回验证模型设计的合理性。</p>

<h4>模型上线</h4>

<p>完成验证后的模型就可以在线上生产环境进行部署。上线后需要为模型配置监控，及时掌握为业务提供数据服务的情况。</p>

<p>还要将模型的实体和属性说明文档发布给数据仓库使用者。</p>

</body>
</html>

